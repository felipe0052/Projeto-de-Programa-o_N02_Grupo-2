<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${#strings.isEmpty(#ids.seq(course.id)) ? 'Novo Curso' : 'Editar Curso'}">Curso</title>
</head>
<body>
<h1 th:text="${#strings.isEmpty(#ids.seq(course.id)) ? 'Novo Curso' : 'Editar Curso'}">Curso</h1>
<form th:action="${#strings.isEmpty(#ids.seq(course.id)) ? '/courses' : '/courses/' + course.id}" th:object="${course}" method="post">
    <div>
        <label>Nome</label>
        <input type="text" th:field="*{nome}"/>
        <div th:if="${#fields.hasErrors('nome')}" th:errors="*{nome}"></div>
    </div>
    <div>
        <label>Descrição</label>
        <textarea th:field="*{descricao}"></textarea>
    </div>
    <div>
        <label>Limite de Alunos</label>
        <input type="number" th:field="*{limiteAlunos}" min="1"/>
    </div>
    <div>
        <label>Valor</label>
        <input type="number" step="0.01" th:field="*{valor}"/>
    </div>
    <div>
        <label>Horário</label>
        <input type="text" th:field="*{horario}"/>
    </div>
    <div>
        <label>Status</label>
        <select th:field="*{status}">
            <option th:each="s : ${statuses}" th:value="${s}" th:text="${s}"></option>
        </select>
    </div>

    <div>
        <label>Categoria Principal</label>
        <select name="mainCategoryId">
            <option th:each="cat : ${categories}" th:value="${cat.id}" th:text="${cat.nome}" th:selected="${course.mainCategory != null && course.mainCategory.id == cat.id}"></option>
        </select>
    </div>
    <div>
        <label>Instrutor Responsável</label>
        <select name="responsibleInstructorId">
            <option th:each="u : ${instructors}" th:value="${u.id}" th:text="${u.nome}" th:selected="${course.responsibleInstructor != null && course.responsibleInstructor.id == u.id}"></option>
        </select>
    </div>

    <div>
        <label>Instrutores Adicionais</label>
        <select name="additionalInstructorIds" multiple size="6">
            <option th:each="u : ${instructors}" th:value="${u.id}" th:text="${u.nome}" th:selected="${course.instructors.contains(u)}"></option>
        </select>
    </div>
    <div>
        <label>Categorias Adicionais</label>
        <select name="additionalCategoryIds" multiple size="6">
            <option th:each="cat : ${categories}" th:value="${cat.id}" th:text="${cat.nome}" th:selected="${course.categories.contains(cat)}"></option>
        </select>
    </div>
    <div>
        <label>Pré-requisitos</label>
        <select name="prerequisiteIds" multiple size="6">
            <option th:each="c : ${allCourses}" th:value="${c.id}" th:text="${c.nome}" th:selected="${course.prerequisites.contains(c)}"></option>
        </select>
    </div>

    <div>
        <button type="submit">Salvar</button>
        <a th:href="@{/courses}">Cancelar</a>
    </div>
</form>
</body>
</html>